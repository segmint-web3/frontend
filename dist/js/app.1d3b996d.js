(function(){var e={9495:function(e,t,n){"use strict";var i=n(6369),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("HeaderComponent"),t("CanvasComponent")],1)},o=[],a=function(){var e=this;e._self._c;return e._m(0)},l=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"header-wrapper"},[t("img",{attrs:{src:"/icons/logo.svg",alt:""}})])}],r={name:"HeaderComponent",data(){return{}}},c=r,d=n(1001),p=(0,d.Z)(c,a,l,!1,null,null,null),u=p.exports,h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"wrapper"},[t("claim-modal",{attrs:{width:e.selectedWidth,height:e.selectedHeight,x:e.selectionStartX,y:e.selectionStartY,onsuccess:e.onModalSuccess}}),t("div",{staticClass:"canvas-container",on:{click:e.click,mouseup:e.onMouseUp,mouseleave:e.onMouseLeave,mousedown:e.onMouseDown,mousemove:e.onMouseMove}},[t("div",{style:e.selectionHeaderStyle},[e._v(" "+e._s(e.selectedWidth)+"x"+e._s(e.selectedHeight)+" ")]),t("div",{style:e.selectionStyles}),e._l(e.badTiles,(function(n){return t("div",{key:n.index},[e.selectedTilesCount>e.badTiles.length?t("div",{style:e.styleForBadTile(n)}):e._e()])})),t("div",{staticClass:"hover-popup",style:e.highLightPopupStyles},[e._v(" "+e._s(e.highlightNftDescription)+" ")]),t("canvas",{ref:"canvas",attrs:{width:"1000",height:"1000"}}),t("br")],2),null===this.selectionStartX||this.selectionInProcess?e._e():t("button",{staticClass:"mint-button",on:{click:e.claim}},[e._v(" Mint segment ")])],1)},m=[],y=(n(7658),function(){var e=this,t=e._self._c;return t("modal",{attrs:{name:"claim-modal",height:"auto"},on:{"before-close":e.beforeClose}},[t("div",{staticStyle:{"min-height":"300px","min-width":"300px",position:"relative"}},[e.claimInProgress?t("div",{staticStyle:{"background-color":"rgba(0, 0, 0, 0.3)",position:"absolute",left:"0",right:"0",top:"0",bottom:"0"}}):e._e(),t("div",{staticStyle:{margin:"auto"}},[t("br"),t("br"),t("label",{staticClass:"block cursor-pointer",attrs:{for:"assetsFieldHandle"}},[t("div",[e._v(" Please upload a picture "+e._s(this.width)+"x"+e._s(this.height)+"px. You will can change the picture later. ")])])]),t("br"),t("input",{ref:"file",attrs:{type:"file",multiple:"",name:"fields[assetsFieldHandle][]",id:"assetsFieldHandle",accept:".pdf,.jpg,.jpeg,.png"},on:{change:e.onChange}}),t("br"),t("div",{staticClass:"canvasContainer",style:e.canvasContainerStyles},[t("canvas",{ref:"canvas",style:e.canvasContainerStyles,attrs:{width:this.$props.width,height:this.$props.height}})]),t("br"),e.canBeClaimed?t("button",{on:{click:e.claim}},[e._v(" Claim tiles ")]):e._e()])])}),f=[],g=(n(2062),n(2396));function v(e){let t=[];for(let n=0;n<10;n++){let i=new g.BN(e.r[n]),s=new g.BN(e.g[n]),o=new g.BN(e.b[n]);for(let e=0;e<10;e++)t.push(i.shrn(8*(9-e)).and(new g.BN("255",10)).toNumber()),t.push(s.shrn(8*(9-e)).and(new g.BN("255",10)).toNumber()),t.push(o.shrn(8*(9-e)).and(new g.BN("255",10)).toNumber()),t.push(255)}return t}function b(e){const t={r:[],b:[],g:[]};for(let n=0;n<10;n++){let i=new g.BN("0",10),s=new g.BN("0",10),o=new g.BN("0",10);for(let t=0;t<10;t++)i=i.shln(0===t?0:8).or(new g.BN(e[4*t+0+10*n*4].toString(10),10)),s=s.shln(0===t?0:8).or(new g.BN(e[4*t+1+10*n*4].toString(10),10)),o=o.shln(0===t?0:8).or(new g.BN(e[4*t+2+10*n*4].toString(10),10));t.r.push(i.toString(10)),t.g.push(s.toString(10)),t.b.push(o.toString(10))}return t}var x={name:"ClaimModal",data:function(){return{coloredTiles:[],claimInProgress:!1}},props:["x","y","width","height","onsuccess"],computed:{canBeClaimed:function(){return this.coloredTiles.length>0},canvasContainerStyles:function(){return this.$props.width>100||this.$props.height>100?{margin:"auto",width:2*this.$props.width+"px",height:2*this.$props.height+"px"}:{margin:"auto",width:4*this.$props.width+"px",height:4*this.$props.height+"px"}}},methods:{onChange(){const e=this.$refs.canvas.getContext("2d");e.imageSmoothingEnabled=!1;const t=new Image,n=this.$props.width,i=this.$props.height;e.fillStyle="white",e.fillRect(0,0,n,i),this.coloredTiles=[];const s=[];t.onload=function(){const o=t.width/t.height;let a,l;n/i>o?(l=i,a=l*o):(a=n,l=a/o);const r=(n-a)/2,c=(i-l)/2;e.drawImage(t,r,c,a,l);for(let t=0;t<i/10;t++)for(let i=0;i<n/10;i++){const n=e.getImageData(10*i,10*t,10,10);s.push(b(n.data))}this.coloredTiles=s}.bind(this),t.src=URL.createObjectURL(this.$refs.file.files[0])},claim(){if(this.claimInProgress)return;const e="Test description",t="https://google.com",n=this.$store.dispatch("Provider/claimTiles",{x:this.$props.x,y:this.$props.y,width:this.$props.width,height:this.$props.height,tiles:this.coloredTiles,description:e,url:t});n&&(this.claimInProgress=!0,n.then((()=>{this.claimInProgress=!1,this.$props.onsuccess()})).catch((()=>{this.claimInProgress=!1})))},beforeClose(e){this.claimInProgress&&e.cancel()}}},w=x,S=(0,d.Z)(w,y,f,!1,null,"974dce76",null),I=S.exports,C={name:"CanvasComponent",components:{ClaimModal:I},props:{},data(){return{ctx:null,imageData:null,isMobile:!1,collectionLoaded:!1,selectionInProcess:!1,selectionStartX:null,selectionStartY:null,selectionEndX:null,selectionEndY:null,highLightNftId:null,lastMousePosX:0,lastMousePosY:0}},computed:{badTiles:function(){if(null===this.selectionStartX)return[];let e=this.selectionStartX,t=this.selectionStartY,n=this.selectionEndX,i=this.selectionEndY,s=[];for(let o=e;o<=n;o+=10)for(let e=t;e<=i;e+=10){const t=10*o+e/10,n=this.$store.state.Provider.tilesByIndex[t];"4294967295"!==n.nftId&&s.push(n)}return s},selectedTilesCount:function(){return null===this.selectionStartX||null===this.selectionStartY?0:(this.selectionEndX-this.selectionStartX+10)/10*(this.selectionEndY-this.selectionStartY+10)/10},tiles:function(){return this.$store.state.Provider.tiles},selectedWidth:function(){return this.selectionEndX-this.selectionStartX+10},selectedHeight:function(){return this.selectionEndY-this.selectionStartY+10},highLightPopupStyles:function(){if(this.highLightNftId){const e=this.lastMousePosX>600;return{top:`${this.lastMousePosY}px`,left:`${e?this.lastMousePosX-205:this.lastMousePosX+5}px`,width:"200px",minHeight:"20px"}}return{display:"none"}},highlightNftDescription(){let e=this.$store.state.Provider.nftDataById,t=e[this.highLightNftId];return t?t.description:""},selectionStyles:function(){return null!==this.selectionStartX&&this.selectedTilesCount>this.badTiles.length?{position:"absolute",left:`${this.selectionStartX}px`,top:`${this.selectionStartY}px`,width:this.selectionEndX-this.selectionStartX+10+"px",height:this.selectionEndY-this.selectionStartY+10+"px",backgroundColor:"rgba(204,255,0,0.5)"}:{position:"absolute",left:0,top:0,width:0,height:0,backgroundColor:"rgba(204,255,0,0.5)"}},selectionHeaderStyle:function(){return null!==this.selectionStartX&&this.selectedTilesCount>this.badTiles.length?this.selectionStartY>100?{position:"absolute",left:(this.selectionStartX+this.selectionEndX)/2-30+"px",top:this.selectionStartY-25+"px",width:"60px",height:"20px",borderRadius:"5px",backgroundColor:"yellow"}:{position:"absolute",left:(this.selectionStartX+this.selectionEndX)/2-30+"px",top:`${this.selectionEndY+15}px`,width:"60px",height:"20px",borderRadius:"5px",backgroundColor:"yellow"}:{display:"none",position:"absolute",left:0,top:0,width:0,height:0,backgroundColor:"rgba(204,255,0,0.5)"}}},mounted(){this.ctx=this.$refs.canvas.getContext("2d"),this.imageData=this.ctx.createImageData(10,10),this.$store.subscribe((e=>{console.log(e,"mutation"),"Provider/setTiles"===e.type?this.redraw(e.payload.tiles):"Provider/setTile"===e.type&&this.drawTile(e.payload.tile)}))},methods:{clearSelection(){this.selectionInProcess=!1,this.selectionStartX=null,this.selectionStartY=null,this.selectionEndX=null,this.selectionEndY=null},drawTile(e){this.imageData.data.set(e.pixels),this.ctx.putImageData(this.imageData,e.x,e.y)},redraw(e){for(let t of e)this.imageData.data.set(t.pixels),this.ctx.putImageData(this.imageData,t.x,t.y);this.collectionLoaded=!0},styleForBadTile:function(e){return{position:"absolute",left:`${e.x}px`,top:`${e.y}px`,width:"10px",height:"10px",backgroundColor:"red"}},onMouseDown(e){if(this.isMobile)return;const t=this.$refs.canvas.getBoundingClientRect();let n=10*Math.floor((e.clientX-t.left)/10),i=10*Math.floor((e.clientY-t.top)/10);n<0||n>990||i<0||i>990||(this.selectionInProcess=!0,this.selectionStartX=n,this.selectionStartY=i,this.selectionEndX=n,this.selectionEndY=i)},onMouseMove(e){if(this.isMobile||!this.collectionLoaded)return;const t=this.$refs.canvas.getBoundingClientRect();let n=e.clientX-t.left,i=e.clientY-t.top,s=10*Math.floor(n/10),o=10*Math.floor(i/10);if(!(s<0||s>990||o<0||o>990))if(this.selectionInProcess){if(s<=this.selectionEndX)this.selectionEndX=Math.max(s,this.selectionStartX);else while(s>this.selectionEndX){let e=(this.selectionEndX-this.selectionStartX+20)*(this.selectionEndY-this.selectionStartY+10);if(!(e<=1e4))break;this.selectionEndX+=10}if(o<=this.selectionEndY)this.selectionEndY=Math.max(o,this.selectionStartY);else while(o>this.selectionEndY){let e=(this.selectionEndX-this.selectionStartX+10)*(this.selectionEndY-this.selectionStartY+20);if(!(e<=1e4))break;this.selectionEndY+=10}}else{this.lastMousePosX=n,this.lastMousePosY=i;const e=10*s+o/10,t=this.$store.state.Provider.tilesByIndex[e];t&&"4294967295"!==t.nftId&&t.nftId!==this.highLightNftId?(this.highLightNftId=t.nftId,this.$store.dispatch("Provider/fetchNftData",{id:t.nftId})):t.nftId!==this.highLightNftId&&(this.highLightNftId=null)}},onMouseUp(){if(!this.isMobile){if(this.selectionInProcess=!1,this.selectionStartX===this.selectionEndX&&this.selectionStartY===this.selectionEndY&&this.highLightNftId){let e=this.$store.state.Provider.nftDataById[this.highLightNftId];e&&(window.location=e.url)}this.badTiles.length>0&&this.clearSelection()}},onMouseLeave(){this.isMobile||(this.selectionInProcess&&this.clearSelection(),this.highLightNftId=null)},click(e){if(!this.isMobile)return;const t=this.$refs.canvas.getBoundingClientRect();let n=e.clientX-t.left,i=e.clientY-t.top,s=10*Math.floor(n/10),o=10*Math.floor(i/10);if(null!==this.selectionStartX&&this.selectionStartX===this.selectionEndX&&this.selectionStartY===this.selectionEndY){let e={selectionStartX:this.selectionStartX,selectionStartY:this.selectionStartY,selectionEndX:this.selectionEndX,selectionEndY:this.selectionEndY};this.selectionStartX=Math.min(s,e.selectionStartX),this.selectionStartY=Math.min(o,e.selectionStartY),this.selectionEndX=Math.max(s,e.selectionEndX),this.selectionEndY=Math.max(o,e.selectionEndY)}else this.selectionStartX=s,this.selectionStartY=o,this.selectionEndX=s,this.selectionEndY=o;while((this.selectionEndX-this.selectionStartX+10)*(this.selectionEndY-this.selectionStartY+10)>1e4)Math.random()>.5?this.selectionEndX>this.selectionStartX&&(this.selectionEndX-=10):this.selectionEndY>this.selectionStartY&&(this.selectionEndY-=10);const a=this.tiles.filter((e=>"4294967295"!==e.nftId&&e.x>=this.selectionStartX&&e.y>=this.selectionStartY&&e.x<=this.selectionEndX&&e.y<=this.selectionEndY));0!==a.length&&(this.selectionStartX=null,this.selectionStartY=null,this.selectionEndX=null,this.selectionEndY=null)},claim(){this.$store.state.Provider.account?this.$modal.show("claim-modal"):this.$store.dispatch("Provider/connect")},onModalSuccess(){this.clearSelection(),this.$modal.hide("claim-modal")}}},P=C,X=(0,d.Z)(P,h,m,!1,null,"72f87744",null),Y=X.exports,E={name:"App",components:{HeaderComponent:u,CanvasComponent:Y},mounted(){this.$store.dispatch("Provider/init",{})}},_=E,M=(0,d.Z)(_,s,o,!1,null,null,null),T=M.exports,B=n(3822),k=n(8024),N=n(7945),D=n(5809),$=JSON.parse('{"ABI version":2,"version":"2.3","header":["time"],"functions":[{"name":"constructor","inputs":[{"name":"codeNft","type":"cell"},{"name":"codeIndex","type":"cell"},{"name":"codeIndexBasis","type":"cell"},{"name":"jsonMetadata","type":"string"}],"outputs":[]},{"name":"disableMint","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"value0","type":"bool"}]},{"name":"enableMint","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"value0","type":"bool"}]},{"name":"getMintDisabled","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"value0","type":"bool"}]},{"name":"claimTiles","inputs":[{"name":"pixelStartX","type":"uint10"},{"name":"pixelStartY","type":"uint10"},{"name":"pixelEndX","type":"uint10"},{"name":"pixelEndY","type":"uint10"},{"components":[{"name":"r","type":"uint80[]"},{"name":"g","type":"uint80[]"},{"name":"b","type":"uint80[]"}],"name":"tilesToColorify","type":"tuple[]"},{"name":"description","type":"string"},{"name":"url","type":"string"}],"outputs":[]},{"name":"colorifyTile","inputs":[{"name":"nftId","type":"uint32"},{"components":[{"name":"r","type":"uint80[]"},{"name":"g","type":"uint80[]"},{"name":"b","type":"uint80[]"}],"name":"tileColors","type":"tuple"},{"name":"tilePixelX","type":"uint10"},{"name":"tilePixelY","type":"uint10"},{"name":"sendGasBack","type":"address"}],"outputs":[]},{"name":"getTile","inputs":[{"name":"answerId","type":"uint32"},{"name":"tilePixelX","type":"uint10"},{"name":"tilePixelY","type":"uint10"}],"outputs":[{"name":"pixels","type":"uint8[]"},{"name":"nftId","type":"uint32"}]},{"name":"convertTileColorsToPixels","inputs":[{"name":"answerId","type":"uint32"},{"components":[{"name":"r","type":"uint80[]"},{"name":"g","type":"uint80[]"},{"name":"b","type":"uint80[]"}],"name":"tileColors","type":"tuple"}],"outputs":[{"name":"pixels","type":"uint8[]"}]},{"name":"getTiles","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"components":[{"name":"nftId","type":"uint32"},{"components":[{"name":"r","type":"uint80[]"},{"name":"g","type":"uint80[]"},{"name":"b","type":"uint80[]"}],"name":"colors","type":"tuple"}],"name":"value0","type":"map(uint14,tuple)"}]},{"name":"indexBasisCode","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"code","type":"cell"}]},{"name":"indexBasisCodeHash","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"hash","type":"uint256"}]},{"name":"resolveIndexBasis","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"indexBasis","type":"address"}]},{"name":"indexCode","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"code","type":"cell"}]},{"name":"indexCodeHash","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"hash","type":"uint256"}]},{"name":"getJson","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"json","type":"string"}]},{"name":"totalSupply","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"count","type":"uint128"}]},{"name":"nftCode","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"code","type":"cell"}]},{"name":"nftCodeHash","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"codeHash","type":"uint256"}]},{"name":"nftAddress","inputs":[{"name":"answerId","type":"uint32"},{"name":"id","type":"uint256"}],"outputs":[{"name":"nft","type":"address"}]},{"name":"supportsInterface","inputs":[{"name":"answerId","type":"uint32"},{"name":"interfaceID","type":"uint32"}],"outputs":[{"name":"value0","type":"bool"}]}],"data":[{"key":1,"name":"owner_","type":"address"},{"key":2,"name":"nonce_","type":"uint16"}],"events":[{"name":"MintDisabledChanged","inputs":[{"name":"newValue","type":"bool"}],"outputs":[]},{"name":"TileColorify","inputs":[{"name":"nftId","type":"uint32"},{"name":"pixelStartX","type":"uint10"},{"name":"pixelStartY","type":"uint10"},{"components":[{"name":"r","type":"uint80[]"},{"name":"g","type":"uint80[]"},{"name":"b","type":"uint80[]"}],"name":"tileColors","type":"tuple"}],"outputs":[]},{"name":"NftMinted","inputs":[{"name":"nftId","type":"uint32"},{"name":"pixelStartX","type":"uint10"},{"name":"pixelStartY","type":"uint10"},{"name":"pixelEndX","type":"uint10"},{"name":"pixelEndY","type":"uint10"}],"outputs":[]},{"name":"NftCreated","inputs":[{"name":"id","type":"uint256"},{"name":"nft","type":"address"},{"name":"owner","type":"address"},{"name":"manager","type":"address"},{"name":"creator","type":"address"}],"outputs":[]},{"name":"NftBurned","inputs":[{"name":"id","type":"uint256"},{"name":"nft","type":"address"},{"name":"owner","type":"address"},{"name":"manager","type":"address"}],"outputs":[]}],"fields":[{"name":"_pubkey","type":"uint256"},{"name":"_timestamp","type":"uint64"},{"name":"_constructorFlag","type":"bool"},{"name":"_supportedInterfaces","type":"optional(cell)"},{"name":"_codeNft","type":"cell"},{"name":"_totalSupply","type":"uint128"},{"name":"_json","type":"string"},{"name":"_codeIndex","type":"cell"},{"name":"_codeIndexBasis","type":"cell"},{"name":"_indexDeployValue","type":"uint128"},{"name":"_indexDestroyValue","type":"uint128"},{"name":"_deployIndexBasisValue","type":"uint128"},{"name":"owner_","type":"address"},{"name":"nonce_","type":"uint16"},{"name":"mintDisabled_","type":"bool"},{"name":"nftCounter","type":"uint32"},{"components":[{"name":"nftId","type":"uint32"},{"components":[{"name":"r","type":"uint80[]"},{"name":"g","type":"uint80[]"},{"name":"b","type":"uint80[]"}],"name":"colors","type":"tuple"}],"name":"tiles","type":"map(uint14,tuple)"},{"name":"remainOnNft_","type":"uint128"}]}'),O=JSON.parse('{"ABI version":2,"version":"2.3","header":["time"],"functions":[{"name":"constructor","inputs":[{"name":"owner","type":"address"},{"name":"sendGasTo","type":"address"},{"name":"remainOnNft","type":"uint128"},{"name":"indexDeployValue","type":"uint128"},{"name":"indexDestroyValue","type":"uint128"},{"name":"codeIndex","type":"cell"},{"name":"tilePixelsStartX","type":"uint10"},{"name":"tilePixelsStartY","type":"uint10"},{"name":"tilePixelsEndX","type":"uint10"},{"name":"tilePixelsEndY","type":"uint10"},{"name":"description","type":"string"},{"name":"url","type":"string"}],"outputs":[]},{"name":"getJson","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"json","type":"string"}]},{"name":"getNftCustomData","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"value0","type":"string"},{"name":"value1","type":"string"}]},{"name":"colorify","inputs":[{"components":[{"name":"r","type":"uint80[]"},{"name":"g","type":"uint80[]"},{"name":"b","type":"uint80[]"}],"name":"tilesToColorify","type":"tuple[]"},{"name":"sendGasBack","type":"address"}],"outputs":[]},{"name":"indexCode","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"code","type":"cell"}]},{"name":"indexCodeHash","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"hash","type":"uint256"}]},{"name":"resolveIndex","inputs":[{"name":"answerId","type":"uint32"},{"name":"collection","type":"address"},{"name":"owner","type":"address"}],"outputs":[{"name":"index","type":"address"}]},{"name":"transfer","inputs":[{"name":"to","type":"address"},{"name":"sendGasTo","type":"address"},{"components":[{"name":"value","type":"uint128"},{"name":"payload","type":"cell"}],"name":"callbacks","type":"map(address,tuple)"}],"outputs":[]},{"name":"changeOwner","inputs":[{"name":"newOwner","type":"address"},{"name":"sendGasTo","type":"address"},{"components":[{"name":"value","type":"uint128"},{"name":"payload","type":"cell"}],"name":"callbacks","type":"map(address,tuple)"}],"outputs":[]},{"name":"changeManager","inputs":[{"name":"newManager","type":"address"},{"name":"sendGasTo","type":"address"},{"components":[{"name":"value","type":"uint128"},{"name":"payload","type":"cell"}],"name":"callbacks","type":"map(address,tuple)"}],"outputs":[]},{"name":"getInfo","inputs":[{"name":"answerId","type":"uint32"}],"outputs":[{"name":"id","type":"uint256"},{"name":"owner","type":"address"},{"name":"manager","type":"address"},{"name":"collection","type":"address"}]},{"name":"supportsInterface","inputs":[{"name":"answerId","type":"uint32"},{"name":"interfaceID","type":"uint32"}],"outputs":[{"name":"value0","type":"bool"}]}],"data":[{"key":1,"name":"_id","type":"uint256"}],"events":[{"name":"NftCreated","inputs":[{"name":"id","type":"uint256"},{"name":"owner","type":"address"},{"name":"manager","type":"address"},{"name":"collection","type":"address"}],"outputs":[]},{"name":"OwnerChanged","inputs":[{"name":"oldOwner","type":"address"},{"name":"newOwner","type":"address"}],"outputs":[]},{"name":"ManagerChanged","inputs":[{"name":"oldManager","type":"address"},{"name":"newManager","type":"address"}],"outputs":[]},{"name":"NftBurned","inputs":[{"name":"id","type":"uint256"},{"name":"owner","type":"address"},{"name":"manager","type":"address"},{"name":"collection","type":"address"}],"outputs":[]}],"fields":[{"name":"_pubkey","type":"uint256"},{"name":"_timestamp","type":"uint64"},{"name":"_constructorFlag","type":"bool"},{"name":"_supportedInterfaces","type":"optional(cell)"},{"name":"_id","type":"uint256"},{"name":"_collection","type":"address"},{"name":"_owner","type":"address"},{"name":"_manager","type":"address"},{"name":"_indexDeployValue","type":"uint128"},{"name":"_indexDestroyValue","type":"uint128"},{"name":"_codeIndex","type":"cell"},{"name":"tilePixelsStartX_","type":"uint10"},{"name":"tilePixelsStartY_","type":"uint10"},{"name":"tilePixelsEndX_","type":"uint10"},{"name":"tilePixelsEndY_","type":"uint10"},{"name":"remainOnNft_","type":"uint128"},{"name":"description_","type":"string"},{"name":"url_","type":"string"}]}');n(2898);const L=new N.Address("0:9839d6aa44562c00f0fb43a80069c4a9e9f60b2867c9a6101a9e9eb7feb7c3b3"),j=()=>D.EverscaleStandaloneClient.create({connection:{id:42,group:"dev",type:"graphql",data:{endpoints:["https://devnet.evercloud.dev/ccb89dc0493c4edd9f6d7b5e27d73aef/graphql"],latencyDetectionInterval:1e3,local:!1}}});async function H(e,t,n){console.log("get new state");const i=new e.Contract($,L),{state:s}=await i.getFullState();console.log("state got");const o=new e.Subscriber;o.transactions(i.address).on((async e=>{console.log("We got a new transaction on collection address",e);for(let s of e.transactions){let e=await i.decodeTransactionEvents({transaction:s});for(let i of e)if("TileColorify"===i.event){let e=parseInt(i.data.pixelStartX),s=parseInt(i.data.pixelStartY),o={index:e/10*100+s/10,nftId:i.data.nftId,x:e,y:s,pixels:v(i.data.tileColors)};n("Provider/setTile",{tile:o,providerId:t})}}})),n("Provider/setCollection",{providerId:t,collectionContract:i,collectionCachedState:s,collectionSubscriber:o})}async function F(e,t,n,i){let s=[],o={},{value0:a}=await t.methods.getTiles({answerId:0}).call({responsible:!0,cachedState:n});for(let l of a){let e=new g.BN(l[0]),t=l[1],n=parseInt(e.shrn(7).toString(10)),i=parseInt(e.and(new g.BN("127",10)).toString(10));const a=100*n+i;let r={index:a,nftId:t.nftId,x:10*n,y:10*i,pixels:v(t.colors)};s.push(r),o[a]=r}for(let l=0;l<100;l++)for(let e=0;e<100;e++){let t=100*e+l;if(!o[t]){const n={index:t,nftId:"4294967295",x:10*e,y:10*l,pixels:Array(400).fill(0)};s.push(n),o[t]=n}}e("Provider/setTiles",{providerId:i,tiles:s,tilesByIndex:o})}const V={namespaced:!0,state:{venomConnect:null,provider:null,account:null,providerId:0,collectionContract:null,collectionCachedState:null,collectionSubscriber:null,collectionLoaded:!1,tiles:[],tilesByIndex:{},nftDataById:{}},mutations:{setVenomConnect(e,t){e.venomConnect=t},setProvider(e,t){console.log("setProvider",t),e.providerId+=1,e.collectionContract=null,e.collectionCachedState=null,e.collectionLoaded=!1,e.tiles=[],e.providerSubscriber&&e.providerSubscriber.unsubscribe(),e.providerSubscriber=null,e.provider=t,e.provider.subscribe("networkChanged").then((n=>{n.on("data",(n=>{H(t,e.providerId,this.commit)}))})),H(t,e.providerId,this.commit)},setCollection(e,{providerId:t,collectionContract:n,collectionCachedState:i,collectionSubscriber:s}){e.providerId===t?(e.collectionContract=n,e.collectionCachedState=i,e.collectionSubscriber=s,F(this.commit,n,i,t)):s.unsubscribe()},setTiles(e,{providerId:t,tiles:n,tilesByIndex:i}){console.log("setTile",n),e.providerId===t&&(e.tiles=n,e.tilesByIndex=i,e.collectionLoaded=!0)},setTile(e,{providerId:t,tile:n}){if(console.log("setTile",n),e.providerId!==t)return;let i=e.tiles;i=i.filter((e=>e.index!==n.index)),i.push(n),e.tilesByIndex[n.index]=n,e.tiles=i,delete e.nftDataById[n.nftId]},setConnectedAccount(e,t){e.account=t},setNftDataLoadingInProgress(e,t){let n=e.nftDataById;n[t]||(n[t]={loading:!0,url:"",description:""},e.nftDataById=n)},setNftData(e,{id:t,description:n,url:i}){let s=Object.assign({},e.nftDataById);s[t]={description:n,url:i},e.nftDataById=s}},getters:{getNftDescriptionById:e=>t=>{let n=e.nftDataById,i=n[t];return i?i.description:""}},actions:{init({state:e,commit:t}){if(e.venomConnect)return;const n=new k.VenomConnect({theme:"light",checkNetworkId:42,providersOptions:{venomwallet:{links:{},walletWaysToConnect:[{package:N.ProviderRpcClient,packageOptions:{fallback:k.VenomConnect.getPromise("venomwallet","extension")||(()=>Promise.reject()),forceUseFallback:!0},packageOptionsStandalone:{fallback:j,forceUseFallback:!0},id:"extension",type:"extension"}],defaultWalletWaysToConnect:["mobile","ios","android"]},everwallet:{links:{},walletWaysToConnect:[{package:N.ProviderRpcClient,packageOptions:{fallback:k.VenomConnect.getPromise("everwallet","extension")||(()=>Promise.reject()),forceUseFallback:!0},packageOptionsStandalone:{fallback:j,forceUseFallback:!0},id:"extension",type:"extension"}],defaultWalletWaysToConnect:["mobile","ios","android"]}}});t("setVenomConnect",n),n.checkAuth().then((async e=>{const i=await(e?.getProviderState());if(i?.permissions?.accountInteraction)t("setProvider",e),t("setConnectedAccount",i?.permissions?.accountInteraction?.address);else{let e=await n.getStandalone();console.log("Standalone provider"),t("setProvider",e)}})),n.on("extension-auth",(async function(e){console.log("extension-auth");const n=await(e?.getProviderState());t("setProvider",e),n?.permissions?.accountInteraction?.address&&t("setConnectedAccount",n?.permissions?.accountInteraction?.address)}))},connect({state:e,commit:t}){e.venomConnect.connect()},disconnect({state:e,commit:t}){e.provider.disconnect(),t("setConnectedAccount",null),e.venomConnect.getStandalone().then((function(e){console.log("Standalone provider"),t("setProvider",e)}))},claimTiles({state:e,commit:t},{x:n,y:i,width:s,height:o,tiles:a,description:l,url:r}){if(null===e.account)return void e.venomConnect.connect();const c=e.collectionContract.methods.claimTiles({pixelStartX:n,pixelStartY:i,pixelEndX:n+s,pixelEndY:i+o,tilesToColorify:a,description:l||"Test description",url:r||"https://google.com"}).send({from:e.account,amount:(s*o/100*4e8+3e9).toString()});return new Promise(((t,n)=>{c.then((async n=>{const i=new e.provider.Subscriber;await i.trace(n).tap((e=>{})).finished(),t()})).catch(n)}))},fetchNftData({state:e,commit:t},{id:n}){!e.nftDataById[n]&&e.provider&&e.collectionCachedState&&(t("setNftDataLoadingInProgress",n),e.collectionContract.methods.nftAddress({id:n,answerId:0}).call({responsible:!0,cachedState:e.collectionCachedState}).then((t=>{let n=new e.provider.Contract(O,t.nft);return n.methods.getNftCustomData({answerId:0}).call({responsible:!0})})).then((e=>{let{value0:i,value1:s}=e;t("setNftData",{id:n,description:i,url:s})})))}}};i.ZP.use(B.ZP);var A=new B.ZP.Store({state:{},mutations:{},actions:{},modules:{Provider:V}}),R=n(8812),U=n.n(R);i.ZP.use(U()),i.ZP.config.productionTip=!1,new i.ZP({store:A,render:e=>e(T)}).$mount("#app")},6601:function(){}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,function(){var e=[];n.O=function(t,i,s,o){if(!i){var a=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],o=e[d][2];for(var l=!0,r=0;r<i.length;r++)(!1&o||a>=o)&&Object.keys(n.O).every((function(e){return n.O[e](i[r])}))?i.splice(r--,1):(l=!1,o<a&&(a=o));if(l){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,s,o]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){n.p="/frontend/"}(),function(){n.b=document.baseURI||self.location.href;var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,o,a=i[0],l=i[1],r=i[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(r)var d=r(n)}for(t&&t(i);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(d)},i=self["webpackChunksegmint_frontend"]=self["webpackChunksegmint_frontend"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(9495)}));i=n.O(i)})();
//# sourceMappingURL=app.1d3b996d.js.map